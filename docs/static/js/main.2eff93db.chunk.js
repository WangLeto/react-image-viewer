(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a.p+"static/media/logo.884b48f3.svg"},13:function(e,t,a){e.exports=a(24)},19:function(e,t,a){},22:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(1),r=a.n(o),s=(a(19),a(3)),c=a(4),l=a(6),u=a(5),m=a(7),d=a(8),h=a.n(d),g=a(10),f=a(12),p=a(2),v=(a(22),-1),T=1,b={doubleClickScale:1,shiftImage:2,free:3,move:4},x=15,w=.6,y=!1;try{var k=Object.defineProperty({},"passive",{get:function(){return y=!0,!1}});window.addEventListener("passivetest",null,k)}catch(L){}var S=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).startTouch=function(e){a.timers.firstClickTimer?(a.recordTimer("doubleClickTimer",300),a.clearTimeout("firstClickTimer")):a.recordTimer("firstClickTimer",300,a.toggleTopBar),a.touching=!0;var t=e.touches;if(1===t.length){var n=t[0];a.recordPreTouchPosition(n.clientX,n.clientY)}else{var i=t[0],o=t[1];a.preTouchesClientx1y1x2y2=[i.clientX,i.clientY,o.clientX,o.clientY]}},a.stopTouch=function(e){if(1===e.touches.length){var t=e.touches[0];a.recordPreTouchPosition(t.clientX,t.clientY)}else if(0===e.touches.length){if(a.touching=!1,a.preTouchesClientx1y1x2y2=[],a.timers.doubleClickTimer){var n=e.changedTouches[0];return void a.doubleClickScale(n.target,n.clientX,n.clientY)}a.timers.firstClickTimer||a.timers.doubleClickTimer||(a.state.lastAction===b.move?a.inertiaDamp.extraMove():a.state.lastAction===b.free&&a.inertiaDamp.scaleDamp())}},a.touchMove=function(e){var t=e.touches;if(a.clearTimeout("firstClickTimer"),a.clearTimeout("doubleClickTimer"),t.length>1)a.freeScale(e);else{if(a.timers.justFreeScaled)return;var n=t[0],i=a.imgBounding.rect,o=i.left+a.rectLeft2TransXFix,r=i.top+a.rectTop2TransYFix,s=!1;i.height<=1.01*a.state.maskHeight&&(s=!0);var c=n.pageX-a.preTouchPosition.x+o,l=s?a.state.translateY:n.pageY-a.preTouchPosition.y+r;a.setState({translateX:c,translateY:l,transition:"",enableTransformAnimation:!1,lastAction:b.move}),a.recordPreTouchPosition(n.clientX,n.clientY),a.inertiaDamp.recordTranslate(n.pageX,n.pageY)}},a.inertiaDamp={lastTwoMove:[{x:0,y:0},{x:0,y:0}],recordTranslate:function(e,t){this.lastTwoMove.shift(),this.lastTwoMove.push({x:e,y:t})},extraMove:function(){var e=a.state;if(e.lastAction===b.move){var t=a.inertiaDamp.lastTwoMove,n=a.state.maskWidth,i=a.state.maskHeight,o=a.imgBounding.rect,r=o.top,s=o.right,c=o.bottom,l=o.left,u=o.height,m=o.width,d=a.imagesSizes[e.currentIndex],h=a.inertiaDamp.scaleRatioCheck();h!==e.scaleRatio&&(l=n/2-(m=d.width*h)/2,s=n/2+m/2,r=i/2-(u=d.height*h)/2,c=i/2+u/2);var g=(t[1].x-t[0].x)*x,f=u>i?(t[1].y-t[0].y)*x:0,p=g+e.translateX,w=f+e.translateY,y=!1;u>=i?r>0||r+f>0?(y=!0,w=a.rectTop2TransYFix):(c<i||c+f<i)&&(y=!0,w=e.translateY+i-c):w=(1-h)*(d.height/2),m<n?(y=!0,p=(1-h)*(d.width/2)):l+g>0?(y=!0,p=e.translateX-l):s+g<n&&(y=!0,p=e.translateX+(n-s));var k=!1,S=null;if(l>0&&g>0?(k=!0,S=v):s<n&&g<0&&(k=!0,S=T),!k||!a.tryShiftImg(S)){var R=Math.log10(Math.sqrt(g*g+f*f)/75),C="all ".concat((R<=.1?.1:R>=1?1:R).toFixed(3),"s cubic-bezier(0.18, 0.8, 0.24, 0.96)");(0!==g||0!==f||y)&&a.setState({scaleRatio:h,translateX:p,translateY:w,transition:y?"all 200ms cubic-bezier(0.18, 0.89, 0.38, 1.2)":C})}}},scaleDamp:function(){var e=a.state,t=a.state.maskWidth,n=a.state.maskHeight,i=a.imgBounding.rect,o=i.top,r=i.right,s=i.bottom,c=i.left,l=i.height,u=i.width,m=e.translateX,d=e.translateY,h=a.imagesSizes[e.currentIndex],g=!1,f=a.inertiaDamp.scaleRatioCheck();l>=n?o>0?(g=!0,d=a.rectTop2TransYFix):s<n&&(g=!0,d=e.translateY+n-s):(g=!0,d=(1-f)*(h.height/2)),u<t?(g=!0,m=(1-f)*(h.width/2)):c>0?(g=!0,m=e.translateX-c):r<t&&(g=!0,m=e.translateX+(t-r)),g&&a.setState({scaleRatio:f,translateX:m,translateY:d,transition:"all 200ms cubic-bezier(0.18, 0.89, 0.38, 1.2)"})},scaleRatioCheck:function(){var e=a.imgBounding.rect,t=a.state.maskWidth,n=a.state.maskHeight,i=a.doubleScaleRatios.minRatio,o=a.state.scaleRatio;return e.width<t&&e.height<n&&o<i?i*w:o}},a.tryShiftImg=function(e){var t=a.props.images.length;if(1!==t){var n=a.state;if((0!==n.currentIndex||e!==v)&&(n.currentIndex!==t-1||e!==T))return a.setState({currentIndex:a.state.currentIndex+e,translateX:0,translateY:0,scaleRatio:1,enableTransformAnimation:!0,lastAction:b.shiftImage},function(){a.getRect2TranslateFix(),a.imgBounding.loadImageBound(a.state.currentIndex),a.doubleScaleRatios.updateScaleRatioList()}),!0}},a.distance=function(e,t,a,n){var i=e-a,o=t-n;return Math.sqrt(i*i+o*o)},a.freeScale=function(e){var t,n=a.state.scaleRatio,i=a.imgBounding.rect,o=i.left,r=i.top,s=e.touches[0],c=s.clientX,l=s.clientY,u=e.touches[1],m=u.clientX,d=u.clientY,h=a.distance(c,l,m,d)/(t=a).distance.apply(t,Object(f.a)(a.preTouchesClientx1y1x2y2))*n||1,g=a.relativeCoordinate((c+m)/2,(l+d)/2,o,r),p=o+a.rectLeft2TransXFix,v=r+a.rectTop2TransYFix;a.setState({scaleRatio:h,translateX:p-(h-n)*g.x,translateY:v-(h-n)*g.y,transition:"",enableTransformAnimation:!1,lastAction:b.free}),a.preTouchesClientx1y1x2y2=[c,l,m,d],a.recordTimer("justFreeScaled",100)},a.doubleClickScale=function(e,t,n){var i=a.imagesSizes[a.state.currentIndex],o=i.width,r=i.height,s=a.doubleScaleRatios.nextRatio,c=a.imgBounding.rect,l=c.left,u=c.top,m=a.state.maskWidth,d=a.state.maskHeight,h=a.relativeCoordinate(t,n,l,u),g=l+a.rectLeft2TransXFix-(s-a.state.scaleRatio)*h.x,f=u+a.rectTop2TransYFix-(s-a.state.scaleRatio)*h.y;if(r*s<d)f=-(s-1)*r/2;else{var p=f-a.rectTop2TransYFix+r*s;p<d&&(f+=d-p);var v=f-a.rectTop2TransYFix;v>0&&(f-=v)}if(o*s<=m)g=-(s-1)*o/2;else{var T=g-a.rectLeft2TransXFix;T>0&&(g-=T);var x=g-a.rectLeft2TransXFix+o*s;x<m&&(g+=m-x)}a.setState({translateX:g,translateY:f,scaleRatio:s,transition:"",enableTransformAnimation:!0,lastAction:b.doubleClickScale})},a.transStyle=function(e){var t=a.state,n=a.state.maskWidth;return Object.assign({},t.currentIndex===e?{transform:"matrix(".concat(t.scaleRatio,", 0, 0, ").concat(t.scaleRatio,", ")+"".concat(t.translateX-n*e,", ").concat(t.translateY,") translateZ(0)"),transition:t.transition,willChange:"transform"}:{transform:"matrix(1, 0, 0, 1, ".concat(-n*t.currentIndex,", 0)")},t.enableTransformAnimation?{transition:"transform 200ms"}:null)},a.closeWrap=function(){a.maskRef.current.style.transform="translateX(100%)",a.imageViewerClosed=!0,a.state.currentIndex},a.imageViewerClosed=!1,a.maskTransitionEnd=function(){a.imageViewerClosed&&a.props.close()},a.toggleTopBar=function(){a.touching||a.setState({showTopBar:!a.state.showTopBar})},a.clearTimeout=function(e){a.timers[e]&&(clearTimeout(a.timers[e]),a.timers[e]=null)},a.recordTimer=function(e,t,n){a.clearTimeout(e),a.timers[e]=setTimeout(function(){n&&n.apply(),a.clearTimeout(e)},t)},a.recordPreTouchPosition=function(e,t){a.preTouchPosition={x:e,y:t}},a.rectTop2TransYFix=0,a.rectLeft2TransXFix=0,a.getRect2TranslateFix=function(){var e=a.imagesSizes[a.state.currentIndex];a.rectTop2TransYFix=-(a.state.maskHeight-e.height)/2,a.rectLeft2TransXFix=-(a.state.maskWidth-e.width)/2},a.cancelTouch=function(e){0===e.touches.length&&(Object.keys(a.timers).map(function(e){return a.clearTimeout(e)}),a.touching=!1)},a.timers={firstClickTimer:null,doubleClickTimer:null,justFreeScaled:null},a.touching=!1,a.imagesSizes=[],a.preTouchesClientx1y1x2y2=[],a.preTouchPosition=null,a.getMaskSize=function(){return{width:document.body.clientWidth,height:document.body.clientHeight}},a.imgBounding={img:null,get rect(){return this.img?this.img.getBoundingClientRect():{top:0,right:0,bottom:0,left:0,height:0,width:0}},loadImageBound:function(e){this.img=document.querySelectorAll(".images img")[e]}},a.doubleScaleRatios={ratioLists:[],computeScale:function(e,t){return e>t?e/t:t/e},that:Object(p.a)(a),get nextRatio(){var e=this.that.state.scaleRatio,t=this.ratioLists.indexOf(e);return t>=0?this.ratioLists[(t+1)%this.ratioLists.length]:this.ratioLists.map(function(t,a){return{ratio:t,scale:e/t,idx:a}}).sort(function(e,t){return t.scale-e.scale})[0].ratio},updateScaleRatioList:function(){var e=[],t=a.state.maskWidth,n=a.state.maskHeight,i=a.imagesSizes[a.state.currentIndex],o=i.width,r=i.height,s=i.originHeight,c=n/r,l=t/o;e.push(c),c!==l&&e.push(l);var u=s/r;e.includes(u)||e.push(u),a.doubleScaleRatios.ratioLists=e},get minRatio(){return this.ratioLists.sort()[0]}},a.relativeCoordinate=function(e,t,n,i){var o=a.state.scaleRatio;return{x:(e-n)/o,y:(t-i)/o}},a.updateOnResize=function(){var e=null,t=function(){var e=a.getMaskSize();a.setState({translateX:0,translateY:0,scaleRatio:1,enableTransformAnimation:!1,maskHeight:e.height,maskWidth:e.width},function(){var e=this;document.querySelectorAll(".images img").forEach(function(t,a){var n=e.imagesSizes[a];n.width=t.width,n.height=t.height}),this.getRect2TranslateFix(),this.doubleScaleRatios.updateScaleRatioList()}.bind(Object(p.a)(a)))};return function(){clearTimeout(e),e=setTimeout(t,100)}}(),a.onImagesLoad=function(e,t){var n=e.target;a.imagesSizes[t]={width:n.width,height:n.height,originWidth:n.naturalWidth,originHeight:n.naturalHeight},t===a.state.currentIndex&&a.getRect2TranslateFix(),!a.imagesSizes.includes(void 0)&&a.imagesSizes.length===a.props.images.length&&(a.imgBounding.loadImageBound(a.state.currentIndex),a.doubleScaleRatios.updateScaleRatioList())},a.disableBodyMove=function(e){e.preventDefault()},a.componentWillMount=function(){},a.componentDidMount=function(){setTimeout(function(){a.maskRef.current.style.transform="translate(0,0)"}),window.addEventListener("resize",a.updateOnResize),document.body.addEventListener("touchmove",a.disableBodyMove,!!y&&{passive:!1})},a.componentWillUnmount=function(){window.removeEventListener("resize",a.updateOnResize),a.props.onUnmount(),document.body.removeEventListener("touchmove",a.disableBodyMove)},a.download=function(){var e=Object(g.a)(h.a.mark(function e(t){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:alert("call native method!");case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();var n=a.getMaskSize(),o=n.width,r=n.height;return a.maskRef=i.a.createRef(),a.state={currentIndex:a.props.currentIndex,scaleRatio:1,showTopBar:!0,translateX:0,translateY:0,enableTransformAnimation:!1,transition:"",maskWidth:o,maskHeight:r},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"mask",ref:this.maskRef,onTransitionEnd:this.maskTransitionEnd},i.a.createElement(R,{close:this.closeWrap,download:this.download,isShow:this.state.showTopBar,enableDownload:this.props.enableDownload,indexInfo:"".concat(this.state.currentIndex+1," / ").concat(this.props.images.length)}),i.a.createElement("div",{className:"images",onTouchEnd:this.stopTouch,onTouchMove:this.touchMove,onTouchStart:this.startTouch,onTouchCancel:this.cancelTouch},this.props.images.map(function(t,a){return i.a.createElement("div",{key:a},i.a.createElement("img",{draggable:!0,src:t,key:a,alt:"".concat(a+1),style:e.transStyle(a),onLoad:function(t){return e.onImagesLoad(t,a)},onContextMenu:function(e){e.preventDefault()}}))})))}}]),t}(n.PureComponent);function R(e){return i.a.createElement("div",{className:"top",style:{transform:e.isShow?null:"translateY(-120%)"}},i.a.createElement("div",{className:"back",onClick:e.close}),i.a.createElement("div",{className:"index"},e.indexInfo),e.enableDownload?i.a.createElement("div",{className:"download",onClick:e.download}):i.a.createElement("div",{className:"download noBackground"}),i.a.createElement("div",{className:"shadow"}))}var C=document.querySelector(".__image_view__");function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=document.body.style.overflow;if(C?document.body.appendChild(C):((C=document.createElement("div")).className="__image_view__",document.body.appendChild(C)),"string"===typeof e?e={images:[e]}:Array.isArray(e)&&(e={images:e}),"undefined"===typeof(e=Object.assign({currentIndex:0,enableDownload:!1},e)).images)throw new Error("Didn't pass the necessary parameters!");e.currentIndex>=e.images.length&&(console.error("Specified image index is larger than images count!"),e.currentIndex=0);var a=i.a.createElement(S,Object.assign(e,{close:function(){r.a.render(null,C)},onUnmount:function(){var a=document.querySelector(".__image_view__");r.a.unmountComponentAtNode(a),document.body.style.overflow=t,e.onClose instanceof Function&&e.onClose.apply(null)}}));r.a.render(a,C),document.body.style.overflow="hidden"}var Y=I,X=a(11),E=a.n(X),F=(a(23),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).showImageView=function(){Y({images:["https://is1-ssl.mzstatic.com/image/thumb/Purple118/v4/bc/ba/16/bcba16f8-49ce-c6b9-6226-d7d85a8556ea/source/256x256bb.jpg","https://camo.githubusercontent.com/ba1b52bab595d4c1557f03bb4abf47acdf67f035/687474703a2f2f73722e6b737269612e636e2f6c6f676f2532306269676765722e706e67","https://cdn.sspai.com/article/86c69914-4545-bc1c-1310-2975d4fe8d6b.jpg?imageMogr2/quality/95/thumbnail/!700x233r/gravity/Center/crop/700x233","https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3591249579,147186327&fm=26&gp=0.jpg"].reverse(),currentIndex:0,onClose:function(){return console.log("viewer onclose callback")},enableHistory:!0})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.showImageView(),"ontouchstart"in window||alert("Please visit on your phone, or enable devtools' mobile mode\r\n\u8bf7\u4f7f\u7528\u624b\u673a\u8bbf\u95ee\uff0c\u6216\u542f\u7528\u5f00\u53d1\u5de5\u5177\u7684\u624b\u673a\u6a21\u62df\u9009\u9879")},300)}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement("img",{src:E.a,className:"App-logo",alt:"logo"}),i.a.createElement("p",null,"\u53ef\u7231\u718a\u56fe\u7247\u67e5\u770b\u5668"),i.a.createElement("button",{onClick:this.showImageView},"show me")),i.a.createElement("div",{className:"svg"}))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,1,2]]]);
//# sourceMappingURL=main.2eff93db.chunk.js.map