(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},13:function(e,t,n){e.exports=n(24)},19:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(1),o=n.n(r),c=(n(19),n(2)),s=n(3),l=n(6),u=n(5),h=n(7),d=n(8),m=n.n(d),g=n(10),f=n(12),p=n(4),v=(n(22),-1),T=1,w={OriginalSize:0,LongSideFit:1,ShortSideFit:2,currentScaleMode:1},b={OriginalSize:0,LongSideFit:1,ShortSideFit:2,Free:3,Move:4},x=15,S=.5,y=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={showView:!1,currentIndex:n.props.currentIndex,scaleRatio:1,showTopBar:!0,translateX:0,translateY:0,enableTransformAnimation:!1},n.startTouch=function(e){n.timers.firstClickTimer?(n.recordTimer("doubleClickTimer",300),n.clearTimeout("firstClickTimer")):n.recordTimer("firstClickTimer",300,n.toggleTopBar),n.touching=!0;var t=e.touches;if(1===t.length){var a=t[0];n.recordPreTouchPosition(a.clientX,a.clientY)}else{var i=t[0],r=t[1];n.preTouchesClientx1y1x2y2=[i.clientX,i.clientY,r.clientX,r.clientY]}},n.stopTouch=function(e){if(1===e.touches.length){var t=e.touches[0];n.recordPreTouchPosition(t.clientX,t.clientY)}else if(0===e.touches.length){if(n.touching=!1,n.preTouchesClientx1y1x2y2=[],n.timers.doubleClickTimer){var a=e.changedTouches[0];return void n.doubleClickScale(a.target,a.clientX,a.clientY)}n.timers.firstClickTimer||n.timers.doubleClickTimer||(n.state.lastAction===b.Move?n.inertiaDamp.extraMove():n.state.lastAction===b.Free&&n.inertiaDamp.scaleDamp())}},n.touchMove=function(e){var t=e.touches;if(n.clearTimeout("firstClickTimer"),n.clearTimeout("doubleClickTimer"),t.length>1)n.freeScale(e);else{if(n.timers.justFreeScaled)return;var a=t[0],i=n.imgBounding.rect,r=i.left+n.rectLeft2TransXFix,o=i.top+n.rectTop2TransYFix,c=n.maskSize,s=!1;i.height<=c.height&&(s=!0);var l=a.pageX-n.preTouchPosition.x+r,u=s?n.state.translateY:a.pageY-n.preTouchPosition.y+o;n.setState({translateX:l,translateY:u,transition:"",enableTransformAnimation:!1,lastAction:b.Move}),n.recordPreTouchPosition(a.clientX,a.clientY),n.inertiaDamp.recordTranslate(a.pageX,a.pageY)}},n.inertiaDamp={lastTwoMove:[{x:0,y:0},{x:0,y:0}],recordTranslate:function(e,t){this.lastTwoMove.shift(),this.lastTwoMove.push({x:e,y:t})},extraMove:function(){var e=n.state;if(e.lastAction===b.Move){var t=n.inertiaDamp.lastTwoMove,a=n.maskSize,i=a.width,r=a.height,o=n.imgBounding.rect,c=o.top,s=o.right,l=o.bottom,u=o.left,h=o.height,d=o.width,m=n.imagesSizes[e.currentIndex],g=n.inertiaDamp.scaleRatioCheck();g!==e.scaleRatio&&(u=i/2-(d=m.width*g)/2,s=i/2+d/2,c=r/2-(h=m.height*g)/2,l=r/2+h/2);var f=(t[1].x-t[0].x)*x,p=h>r?(t[1].y-t[0].y)*x:0,w=f+e.translateX,S=p+e.translateY,y=!1;h>=r?((c>0||c+p>0)&&(y=!0,S=n.rectTop2TransYFix),(l<r||l+p<r)&&(y=!0,S=e.translateY+r-l)):S=(1-g)*(m.height/2),d<i?(y=!0,w=(1-g)*(m.width/2)):u+f>0?(y=!0,w=e.translateX-u):s+f<i&&(y=!0,w=e.translateX+(i-s));var k=!1,C=null;if(u>0&&f>0?(k=!0,C=v):s<i&&f<0&&(k=!0,C=T),!k||!n.tryShiftImg(C)){var z=Math.log10(Math.sqrt(f*f+p*p)/75),I="all ".concat((z<=.1?.1:z>=1?1:z).toFixed(3),"s cubic-bezier(0.18, 0.8, 0.24, 0.96)");(0!==f||0!==p||y)&&n.setState({scaleRatio:g,translateX:w,translateY:S,transition:y?"all 400ms cubic-bezier(0.175, 0.885, 0.32, 1.275)":I})}}},scaleDamp:function(){var e=n.state,t=n.maskSize,a=t.width,i=t.height,r=n.imgBounding.rect,o=r.top,c=r.right,s=r.bottom,l=r.left,u=r.height,h=r.width,d=e.translateX,m=e.translateY,g=n.imagesSizes[e.currentIndex],f=!1,p=n.inertiaDamp.scaleRatioCheck();u>=i?(o>0&&(f=!0,m=n.rectTop2TransYFix),s<i&&(f=!0,m=e.translateY+i-s)):(f=!0,m=(1-p)*(g.height/2)),h<a?(f=!0,d=(1-p)*(g.width/2)):l>0?(f=!0,d=e.translateX-l):c<a&&(f=!0,d=e.translateX+(a-c)),f&&n.setState({scaleRatio:p,translateX:d,translateY:m,transition:"all 400ms cubic-bezier(0.175, 0.885, 0.32, 1.275)"})},scaleRatioCheck:function(){var e=n.imagesSizes[n.state.currentIndex],t=n.imgBounding.rect,a=n.maskSize,i=null;if(t.width<a.width&&t.height<a.height&&t.width<e.width){var r=t.width/a.width>t.height/a.height?"width":"height";t[r]/a[r]<S&&(i=a[r]*S>e[r]?1:a[r]*S/e[r])}return i||n.state.scaleRatio}},n.tryShiftImg=function(e){var t=n.imagesSizes.length;if(1!==t){var a=n.state;if((0!==a.currentIndex||e!==v)&&(a.currentIndex!==t-1||e!==T))return n.setState({currentIndex:n.state.currentIndex+e,translateX:0,translateY:0,scaleRatio:1,enableTransformAnimation:!0},function(){n.getRect2TranslateFix(),n.imgBounding.loadImageBound(n.state.currentIndex)}),!0}},n.distance=function(e,t,n,a){var i=e-n,r=t-a;return Math.sqrt(i*i+r*r)},n.freeScale=function(e){var t,a=n.state.scaleRatio,i=n.imgBounding.rect,r=i.left,o=i.top,c=e.touches[0],s=c.clientX,l=c.clientY,u=e.touches[1],h=u.clientX,d=u.clientY,m=n.distance(s,l,h,d)/(t=n).distance.apply(t,Object(f.a)(n.preTouchesClientx1y1x2y2))*a||1,g=n.relativeCoordinate((s+h)/2,(l+d)/2,r,o),p=r+n.rectLeft2TransXFix,v=o+n.rectTop2TransYFix;n.setState({scaleRatio:m,translateX:p-(m-a)*g.x,translateY:v-(m-a)*g.y,transition:"",enableTransformAnimation:!1,lastAction:b.Free}),n.preTouchesClientx1y1x2y2=[s,l,h,d],n.recordTimer("justFreeScaled",100)},n.doubleClickScale=function(e,t,a){w.currentScaleMode=(w.currentScaleMode+1)%3,console.log("ratio ".concat(w.currentScaleMode));var i=function(e){var t=n.imagesSizes[n.state.currentIndex];switch(e){case w.OriginalSize:return t.originWidth/n.maskSize.width;case w.ShortSideFit:return t.width>t.height?n.maskSize.height/t.height:n.maskSize.width/t.width;default:return 1}}(w.currentScaleMode),r=n.imgBounding.rect,o=n.relativeCoordinate(t,a,r.left,r.top).x,c=n.imagesSizes[n.state.currentIndex].height/2,s=r.left+n.rectLeft2TransXFix,l=r.top+n.rectTop2TransYFix,u=s-(i-n.state.scaleRatio)*o,h=l-(i-n.state.scaleRatio)*c;w.currentScaleMode===w.LongSideFit&&(u=h=0),n.setState({translateX:u,translateY:h,scaleRatio:i,transition:"",enableTransformAnimation:!0,lastAction:w.currentScaleMode},function(){return setTimeout(function(){n.inertiaDamp.scaleDamp()},400)})},n.transStyle=function(e){var t=n.state;return Object.assign({},t.currentIndex===e?{transform:"matrix(".concat(t.scaleRatio,", 0, 0, ").concat(t.scaleRatio,", ")+"".concat(t.translateX-n.maskSize.width*e,", ").concat(t.translateY,") translateZ(0)"),transition:t.transition,willChange:"transform"}:{transform:"matrix(1, 0, 0, 1, ".concat(-n.maskSize.width*t.currentIndex,", 0)")},t.enableTransformAnimation?{transition:"transform 400ms"}:null)},n.toggleTopBar=function(){n.touching||n.setState({showTopBar:!n.state.showTopBar})},n.clearTimeout=function(e){n.timers[e]&&(clearTimeout(n.timers[e]),n.timers[e]=null)},n.recordTimer=function(e,t,a){n.clearTimeout(e),n.timers[e]=setTimeout(function(){a&&a.apply(),n.clearTimeout(e)},t)},n.recordPreTouchPosition=function(e,t){n.preTouchPosition={x:e,y:t}},n.rectTop2TransYFix=0,n.rectLeft2TransXFix=0,n.getRect2TranslateFix=function(){var e=n.maskSize,t=e.height,a=e.width,i=n.imagesSizes[n.state.currentIndex];n.rectTop2TransYFix=-(t-i.height)/2,n.rectLeft2TransXFix=-(a-i.width)/2},n.cancelTouch=function(e){0===e.touches.length&&(Object.keys(n.timers).map(function(e){return n.clearTimeout(e)}),n.touching=!1)},n.timers={firstClickTimer:null,doubleClickTimer:null,justFreeScaled:null},n.touching=!1,n.imagesSizes=[],n.preTouchesClientx1y1x2y2=[],n.preTouchPosition=null,n.maskSize={width:0,height:0},n.getMaskSize=function(){return{width:document.body.clientWidth,height:document.body.clientHeight}},n.imgBounding={img:null,get rect(){return this.img.getBoundingClientRect()},loadImageBound:function(e){this.img=document.querySelectorAll(".images img")[e]}},n.relativeCoordinate=function(e,t,a,i){var r=n.state.scaleRatio;return{x:(e-a)/r,y:(t-i)/r}},n.updateOnResize=function(){var e=null,t=function(){n.maskSize=n.getMaskSize(),n.setState({translateX:0,translateY:0,scaleRatio:1,enableTransformAnimation:!1},function(){var e=this;document.querySelectorAll(".images img").forEach(function(t,n){var a=e.imagesSizes[n];a.width=t.width,a.height=t.height}),this.getRect2TranslateFix()}.bind(Object(p.a)(n)))};return function(){clearTimeout(e),e=setTimeout(t,100)}}(),n.onImagesLoad=function(e,t){var a=e.target;n.imagesSizes[t]={width:a.width,height:a.height,originWidth:a.naturalWidth,originHeight:a.naturalHeight},t===n.state.currentIndex&&n.getRect2TranslateFix()},n.disableBodyMove=function(e){e.preventDefault()},n.componentWillMount=function(){window.addEventListener("resize",n.updateOnResize);var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,!1}});window.addEventListener("passivetest",null,t)}catch(a){}document.body.addEventListener("touchmove",n.disableBodyMove,!!e&&{passive:!1}),n.maskSize=n.getMaskSize()},n.componentDidMount=function(){n.imgBounding.loadImageBound(n.state.currentIndex)},n.componentWillUnmount=function(){n.props.onUnmount(),window.removeEventListener("resize",n.updateOnResize),document.body.removeEventListener("touchmove",n.disableBodyMove)},n.download=function(){var e=Object(g.a)(m.a.mark(function e(t,n){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:alert("call native method!");case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"mask"},i.a.createElement(k,{close:this.props.close,download:this.download,isShow:this.state.showTopBar,indexInfo:"".concat(this.state.currentIndex+1," / ").concat(this.props.images.length)}),i.a.createElement("div",{className:"images",onTouchEnd:this.stopTouch,onTouchMove:this.touchMove,onTouchStart:this.startTouch,onTouchCancel:this.cancelTouch},this.props.images.map(function(t,n){return i.a.createElement("div",{key:n},i.a.createElement("img",{draggable:!0,src:t,key:n,alt:"".concat(n+1),style:e.transStyle(n),onLoad:function(t){return e.onImagesLoad(t,n)},onContextMenu:function(e){e.preventDefault()}}))})))}}]),t}(a.Component);function k(e){return i.a.createElement("div",{className:"top",style:{transform:e.isShow?null:"translateY(-120%)"}},i.a.createElement("div",{className:"back",onClick:e.close}),i.a.createElement("div",{className:"index"},e.indexInfo),i.a.createElement("div",{className:"download",onClick:e.download}),i.a.createElement("div",{className:"shadow"}))}var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=document.querySelector(".__image_view__");if(t?document.body.appendChild(t):((t=document.createElement("div")).className="__image_view__",document.body.appendChild(t)),"string"===typeof e?e={images:[e]}:Array.isArray(e)&&(e={images:e}),"undefined"===typeof(e=Object.assign({currentIndex:0},e)).images)throw new Error("Didn't pass the necessary parameters!");var n=i.a.createElement(y,Object.assign(e,{close:function(){o.a.render(null,t)},onUnmount:function(){var t=document.querySelector(".__image_view__");o.a.unmountComponentAtNode(t),e.onClose instanceof Function&&e.onClose()}}));o.a.render(n,t)},z=n(11),I=n.n(z),M=(n(23),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).showImageView=function(){C({images:["https://is1-ssl.mzstatic.com/image/thumb/Purple118/v4/bc/ba/16/bcba16f8-49ce-c6b9-6226-d7d85a8556ea/source/256x256bb.jpg","https://camo.githubusercontent.com/ba1b52bab595d4c1557f03bb4abf47acdf67f035/687474703a2f2f73722e6b737269612e636e2f6c6f676f2532306269676765722e706e67","https://cdn.sspai.com/article/86c69914-4545-bc1c-1310-2975d4fe8d6b.jpg?imageMogr2/quality/95/thumbnail/!700x233r/gravity/Center/crop/700x233","https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3591249579,147186327&fm=26&gp=0.jpg"].reverse(),currentIndex:1})},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){setTimeout(this.showImageView,300)}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement("img",{src:I.a,className:"App-logo",alt:"logo"}),i.a.createElement("p",null,"Edit ",i.a.createElement("code",null,"src/App.js")," and save to reload."),i.a.createElement("button",{onClick:this.showImageView},"show ImageView")))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,1,2]]]);
//# sourceMappingURL=main.afb91286.chunk.js.map