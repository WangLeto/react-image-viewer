{"version":3,"sources":["logo.svg","ImageView.jsx","App.jsx","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","orientation_left","orientation_right","Actions","doubleClickScale","shiftImage","free","move","MoveRatio","freeScaleRatioByMinRatio","passiveSupport","option","Object","defineProperty","get","window","addEventListener","err","ImageView","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","startTouch","e","timers","firstClickTimer","recordTimer","clearTimeout","toggleTopBar","touching","touches","length","touch","recordPreTouchPosition","clientX","clientY","one","two","preTouchesClientx1y1x2y2","stopTouch","doubleClickTimer","removedTouch","changedTouches","target","state","lastAction","inertiaDamp","extraMove","scaleDamp","touchMove","freeScale","justFreeScaled","rect","imgBounding","posX","left","rectLeft2TransXFix","posY","top","rectTop2TransYFix","forbidTranslateY","height","maskHeight","transX","pageX","preTouchPosition","x","transY","translateY","pageY","y","setState","translateX","transition","enableTransformAnimation","recordTranslate","lastTwoMove","shift","push","lastTwo","mWidth","maskWidth","mHeight","_this$imgBounding$rec","right","bottom","width","dimen","imagesSizes","currentIndex","newScaleRatio","scaleRatioCheck","scaleRatio","extraX","extraY","shouldDamp","wannaShift","shiftOrientation","tryShiftImg","t","Math","log10","sqrt","animation","concat","toFixed","_this$imgBounding$rec2","minRatio","doubleScaleRatios","ratio","allNum","images","getRect2TranslateFix","loadImageBound","updateScaleRatioList","distance","x1","y1","x2","y2","a","b","_this2","oldRatio","_this$imgBounding$rec3","_e$touches$","oneClientX","oneClientY","_e$touches$2","twoClientX","twoClientY","newRatio","apply","toConsumableArray","newOrigin","relativeCoordinate","_this$imagesSizes$_th","nextRatio","isCenter","transitionEnd","propertyName","tagName","transStyle","idx","assign","transform","willChange","closeWrap","maskRef","current","style","allClosed","maskTransitionEnd","close","showTopBar","timerKey","timeout","callback","setTimeout","cancelTouch","keys","map","key","getMaskSize","document","body","clientWidth","clientHeight","img","getBoundingClientRect","index","querySelectorAll","ratioLists","computeScale","that","assertThisInitialized","currentRatio","indexOf","r","i","scale","sort","ratios","_this$imagesSizes$_th2","oHeight","originHeight","heightScale","widthScale","originRatio","includes","updateOnResize","tick","update","maskSize","_this3","forEach","size","bind","onImagesLoad","_ref","originWidth","naturalWidth","naturalHeight","undefined","disableBodyMove","preventDefault","componentWillMount","componentDidMount","passive","componentWillUnmount","removeEventListener","onUnmount","download","_ref2","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","alert","stop","_x","arguments","_this$getMaskSize","React","createRef","_this4","react_default","createElement","className","ref","onTransitionEnd","Topbar","isShow","enableDownload","indexInfo","onTouchEnd","onTouchMove","onTouchStart","onTouchCancel","src","draggable","alt","onLoad","onContextMenu","PureComponent","onClick","ShowImageView","viewerContainer","querySelector","bodyOverflow","overflow","appendChild","Array","isArray","Error","component","ReactDOM","render","container","unmountComponentAtNode","onClose","Function","App","showImageView","reverse","console","log","logo","Component","Boolean","location","hostname","match","src_App_0","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.5a403efa.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.884b48f3.svg\";","import React, { PureComponent } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './styles/ImageView.scss';\r\n\r\n// 切换图片的方向\r\nconst orientation_left = -1, orientation_right = 1;\r\n\r\nconst Actions = {\r\n  doubleClickScale: 1,\r\n  shiftImage: 2,\r\n  free: 3,\r\n  move: 4\r\n};\r\n// 惯性移动倍数\r\nconst MoveRatio = 15;\r\n\r\n// 自由缩放时，较长边最终的显示尺寸不小于自动生成比例的比例\r\n// finalAllowedMinRatio = freeScaleRatioByMinRatio * ratioList.min\r\nconst freeScaleRatioByMinRatio = 0.6;\r\n\r\n// 测试浏览器是否支持较新的 addEventListener 参数；因为闭包，所以只会执行一次\r\nlet passiveSupport = false;\r\ntry {\r\n  let option = Object.defineProperty({}, 'passive', {\r\n    get: () => {\r\n      passiveSupport = true;\r\n      return false;\r\n    }\r\n  });\r\n  window.addEventListener('passivetest', null, option);\r\n} catch (err) { }\r\n\r\n// 使用 PureComponent，state 中如果使用 Array / Object，则需要在 shouldComponentUpdate 额外处理，或使用 immutable 思想\r\nclass ImageView extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    let { width: mWidth, height: mHeight } = this.getMaskSize();\r\n    this.maskRef = React.createRef();\r\n    this.state = {\r\n      // 当前展示的图片序数\r\n      currentIndex: this.props.currentIndex,\r\n      // 当前图片缩放倍率\r\n      scaleRatio: 1,\r\n      // 显示顶栏\r\n      showTopBar: true,\r\n      // 平移量\r\n      translateX: 0,\r\n      translateY: 0,\r\n      // 双击时、切换图片时设为 true，产生动画效果\r\n      enableTransformAnimation: false,\r\n      transition: '',\r\n      // 从外部移入 state 内部，以配合 pure component 特性\r\n      maskWidth: mWidth,\r\n      maskHeight: mHeight,\r\n    };\r\n  }\r\n\r\n  // 判断：如果短时间内离开，且无移动动作，则为工具栏切换\r\n  startTouch = (e) => {\r\n    if (this.timers.firstClickTimer) {\r\n      this.recordTimer('doubleClickTimer', 300);\r\n      this.clearTimeout('firstClickTimer');\r\n    } else {\r\n      this.recordTimer('firstClickTimer', 300, this.toggleTopBar);\r\n    }\r\n    this.touching = true;\r\n    let touches = e.touches;\r\n    // 记录起始点\r\n    if (touches.length === 1) {\r\n      let touch = touches[0];\r\n      this.recordPreTouchPosition(touch.clientX, touch.clientY);\r\n    } else {\r\n      // 多指手势，以前两点为准\r\n      let one = touches['0'];\r\n      let two = touches['1'];\r\n      this.preTouchesClientx1y1x2y2 = [one.clientX, one.clientY, two.clientX, two.clientY];\r\n    }\r\n  }\r\n\r\n  stopTouch = (e) => {\r\n    // 还有一个 touch，解除缩放模式，进入移动\r\n    if (e.touches.length === 1) {\r\n      let touch = e.touches[0];\r\n      this.recordPreTouchPosition(touch.clientX, touch.clientY);\r\n    } else if (e.touches.length === 0) {\r\n      this.touching = false;\r\n      this.preTouchesClientx1y1x2y2 = [];\r\n      // console.log(`before touch stop: %c${Object.keys(Actions).find(key => Actions[key] === this.state.lastAction)}`,\r\n      //   'color:green; font-weight:bold');\r\n      if (this.timers.doubleClickTimer) {\r\n        let removedTouch = e.changedTouches[0];\r\n        this.doubleClickScale(removedTouch.target, removedTouch.clientX, removedTouch.clientY);\r\n        return;\r\n      }\r\n      if (!this.timers.firstClickTimer && !this.timers.doubleClickTimer) {\r\n        if (this.state.lastAction === Actions.move) {\r\n          this.inertiaDamp.extraMove();\r\n        } else if (this.state.lastAction === Actions.free) {\r\n          this.inertiaDamp.scaleDamp();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  touchMove = (e) => {\r\n    let touches = e.touches;\r\n    // 取消单击和双击双击计时\r\n    this.clearTimeout('firstClickTimer');\r\n    this.clearTimeout('doubleClickTimer');\r\n    if (touches.length > 1) {\r\n      this.freeScale(e);\r\n    } else {\r\n      // moving ------------------------------------- (　 ´-ω ･)▄︻┻┳══━一\r\n      // 防止 free scale 抬手时触发 move\r\n      if (this.timers.justFreeScaled) {\r\n        return;\r\n      }\r\n      let touch = touches[0];\r\n      let rect = this.imgBounding.rect;\r\n      let posX = rect.left + this.rectLeft2TransXFix;\r\n      let posY = rect.top + this.rectTop2TransYFix;\r\n      // 仅在高度大于 Y轴高度 的情况下支持 Y 轴移动\r\n      let forbidTranslateY = false;\r\n      // 乘以 1.005 容错：280 * 1.005 = 281.4\r\n      if (rect.height <= this.state.maskHeight * 1.01) {\r\n        forbidTranslateY = true;\r\n      }\r\n      let transX = touch.pageX - this.preTouchPosition.x + posX;\r\n      let transY = forbidTranslateY ? this.state.translateY : touch.pageY - this.preTouchPosition.y + posY;\r\n\r\n      this.setState({\r\n        translateX: transX,\r\n        translateY: transY,\r\n        transition: '',\r\n        enableTransformAnimation: false,\r\n        lastAction: Actions.move\r\n      });\r\n      this.recordPreTouchPosition(touch.clientX, touch.clientY);\r\n      this.inertiaDamp.recordTranslate(touch.pageX, touch.pageY);\r\n    }\r\n  }\r\n\r\n  // 记录 move 最后 2 个位移数据，从而实现惯性效果\r\n  // [{translateX: n, translateY: n}, {..}]\r\n  inertiaDamp = {\r\n    // 写 2 个 null 的话有时会出错，why？\r\n    lastTwoMove: [{ x: 0, y: 0 }, { x: 0, y: 0 }],\r\n    recordTranslate: function (x, y) {\r\n      this.lastTwoMove.shift();\r\n      this.lastTwoMove.push({ x: x, y: y });\r\n    },\r\n    // 进入此处时不可能处于缓动过程中\r\n    extraMove: () => {\r\n      let state = this.state;\r\n      if (state.lastAction !== Actions.move) {\r\n        return;\r\n      }\r\n\r\n      let lastTwo = this.inertiaDamp.lastTwoMove;\r\n      let mWidth = this.state.maskWidth, mHeight = this.state.maskHeight;\r\n      let { top, right, bottom, left, height, width } = this.imgBounding.rect;\r\n      let dimen = this.imagesSizes[state.currentIndex];\r\n      let newScaleRatio = this.inertiaDamp.scaleRatioCheck();\r\n      if (newScaleRatio !== state.scaleRatio) {\r\n        width = dimen.width * newScaleRatio;\r\n        height = dimen.height * newScaleRatio;\r\n        left = mWidth / 2 - width / 2;\r\n        right = mWidth / 2 + width / 2;\r\n        top = mHeight / 2 - height / 2;\r\n        bottom = mHeight / 2 + height / 2;\r\n      }\r\n\r\n      let extraX = (lastTwo[1].x - lastTwo[0].x) * MoveRatio;\r\n      let extraY = height > mHeight ? (lastTwo[1].y - lastTwo[0].y) * MoveRatio : 0;\r\n      let transX = extraX + state.translateX;\r\n      // fixme 第二张图，缓动弹跳问题\r\n      let transY = extraY + state.translateY;\r\n      let shouldDamp = false;\r\n\r\n      if (height >= mHeight) {\r\n        if (top > 0 || top + extraY > 0) {\r\n          shouldDamp = true;\r\n          transY = this.rectTop2TransYFix;\r\n        } else if (bottom < mHeight || bottom + extraY < mHeight) {\r\n          shouldDamp = true;\r\n          transY = state.translateY + mHeight - bottom;\r\n        }\r\n      } else {\r\n        // 不触发回弹动画\r\n        transY = (1 - newScaleRatio) * (dimen.height / 2);\r\n      }\r\n      // fixme review needed\r\n      if (width < mWidth) {\r\n        shouldDamp = true;\r\n        transX = (1 - newScaleRatio) * (dimen.width / 2);\r\n      } else {\r\n        if (left + extraX > 0) {\r\n          shouldDamp = true;\r\n          transX = state.translateX - left;\r\n        } else if (right + extraX < mWidth) {\r\n          shouldDamp = true;\r\n          transX = state.translateX + (mWidth - right);\r\n        }\r\n      }\r\n\r\n      // todo 切换前就展示下张图片\r\n\r\n      let wannaShift = false;\r\n      let shiftOrientation = null;\r\n      if (left > 0 && extraX > 0) {\r\n        wannaShift = true;\r\n        shiftOrientation = orientation_left;\r\n      } else if (right < mWidth && extraX < 0) {\r\n        wannaShift = true;\r\n        shiftOrientation = orientation_right;\r\n      }\r\n      if (wannaShift && this.tryShiftImg(shiftOrientation)) {\r\n        return;\r\n      }\r\n\r\n      let t = Math.log10(Math.sqrt(extraX * extraX + extraY * extraY) / 75);\r\n      let animation = `all ${(t <= 0.1 ? 0.1 : t >= 1 ? 1 : t).toFixed(3)}s cubic-bezier(0.18, 0.8, 0.24, 0.96)`;\r\n      if (extraX === 0 && extraY === 0 && !shouldDamp) {\r\n        return;\r\n      }\r\n\r\n      this.setState({\r\n        scaleRatio: newScaleRatio,\r\n        translateX: transX,\r\n        translateY: transY,\r\n        transition: shouldDamp ? 'all 200ms cubic-bezier(0.18, 0.89, 0.38, 1.2)' : animation\r\n      });\r\n    },\r\n    // scale 后的正骨（误）复位效果\r\n    scaleDamp: () => {\r\n      let state = this.state;\r\n      let mWidth = this.state.maskWidth, mHeight = this.state.maskHeight;\r\n      let { top, right, bottom, left, height, width } = this.imgBounding.rect;\r\n      let transX = state.translateX;\r\n      let transY = state.translateY;\r\n      let dimen = this.imagesSizes[state.currentIndex];\r\n      let shouldDamp = false;\r\n      let newScaleRatio = this.inertiaDamp.scaleRatioCheck();\r\n\r\n      if (height >= mHeight) {\r\n        if (top > 0) {\r\n          shouldDamp = true;\r\n          transY = this.rectTop2TransYFix;\r\n        } else if (bottom < mHeight) {\r\n          shouldDamp = true;\r\n          transY = state.translateY + mHeight - bottom;\r\n        }\r\n      } else {\r\n        shouldDamp = true;\r\n        transY = (1 - newScaleRatio) * (dimen.height / 2);\r\n      }\r\n      if (width < mWidth) {\r\n        shouldDamp = true;\r\n        transX = (1 - newScaleRatio) * (dimen.width / 2);\r\n      } else {\r\n        if (left > 0) {\r\n          shouldDamp = true;\r\n          transX = state.translateX - left;\r\n        } else if (right < mWidth) {\r\n          shouldDamp = true;\r\n          transX = state.translateX + (mWidth - right);\r\n        }\r\n      }\r\n\r\n      if (shouldDamp) {\r\n        this.setState({\r\n          scaleRatio: newScaleRatio,\r\n          translateX: transX,\r\n          translateY: transY,\r\n          transition: 'all 200ms cubic-bezier(0.18, 0.89, 0.38, 1.2)'\r\n        });\r\n      }\r\n    },\r\n    scaleRatioCheck: () => {\r\n      let rect = this.imgBounding.rect;\r\n      let mWidth = this.state.maskWidth, mHeight = this.state.maskHeight;\r\n      let minRatio = this.doubleScaleRatios.minRatio;\r\n      // 图片过小的限制\r\n      let ratio = this.state.scaleRatio;\r\n      if (rect.width < mWidth && rect.height < mHeight) {\r\n        if (ratio < minRatio) {\r\n          return minRatio * freeScaleRatioByMinRatio;\r\n        }\r\n      }\r\n      return ratio;\r\n    }\r\n  }\r\n\r\n  tryShiftImg = (shiftOrientation) => {\r\n    let allNum = this.props.images.length;\r\n    if (allNum === 1) {\r\n      return;\r\n    }\r\n    let state = this.state;\r\n    if (state.currentIndex === 0 && shiftOrientation === orientation_left) {\r\n      return;\r\n    }\r\n    if (state.currentIndex === allNum - 1 && shiftOrientation === orientation_right) {\r\n      return;\r\n    }\r\n    this.setState({\r\n      currentIndex: this.state.currentIndex + shiftOrientation,\r\n      translateX: 0,\r\n      translateY: 0,\r\n      scaleRatio: 1,\r\n      enableTransformAnimation: true,\r\n      lastAction: Actions.shiftImage\r\n    }, () => {\r\n      this.getRect2TranslateFix();\r\n      this.imgBounding.loadImageBound(this.state.currentIndex);\r\n      this.doubleScaleRatios.updateScaleRatioList();\r\n    });\r\n    return true;\r\n  }\r\n\r\n  distance = (x1, y1, x2, y2) => {\r\n    let a = x1 - x2;\r\n    let b = y1 - y2;\r\n    return Math.sqrt(a * a + b * b);\r\n  }\r\n\r\n  freeScale = (e) => {\r\n    let oldRatio = this.state.scaleRatio;\r\n    let { left, top } = this.imgBounding.rect;\r\n    let { clientX: oneClientX, clientY: oneClientY } = e.touches['0'];\r\n    let { clientX: twoClientX, clientY: twoClientY } = e.touches['1'];\r\n    let newRatio = this.distance(oneClientX, oneClientY, twoClientX, twoClientY) /\r\n      this.distance(...this.preTouchesClientx1y1x2y2) * oldRatio || 1;\r\n    let newOrigin = this.relativeCoordinate((oneClientX + twoClientX) / 2, (oneClientY + twoClientY) / 2, left, top);\r\n    let posX = left + this.rectLeft2TransXFix;\r\n    let posY = top + this.rectTop2TransYFix;\r\n    this.setState({\r\n      scaleRatio: newRatio,\r\n      translateX: posX - (newRatio - oldRatio) * (newOrigin.x),\r\n      translateY: posY - (newRatio - oldRatio) * (newOrigin.y),\r\n      transition: '',\r\n      enableTransformAnimation: false,\r\n      lastAction: Actions.free\r\n    });\r\n    this.preTouchesClientx1y1x2y2 = [oneClientX, oneClientY, twoClientX, twoClientY];\r\n    this.recordTimer('justFreeScaled', 100);\r\n  }\r\n\r\n  doubleClickScale = (target, clientX, clientY) => {\r\n    let { width, height } = this.imagesSizes[this.state.currentIndex];\r\n    let newRatio = this.doubleScaleRatios.nextRatio;\r\n    let rect = this.imgBounding.rect;\r\n    let mWidth = this.state.maskWidth, mHeight = this.state.maskHeight;\r\n    let newOrigin = {\r\n      x: this.relativeCoordinate(clientX, clientY, rect.left, rect.top).x,\r\n      // todo 对于 origin 的选取：参考快图浏览的实现的话，不需要使用回调函数纠正\r\n      y: this.imagesSizes[this.state.currentIndex].height / 2,\r\n    };\r\n    let isCenter = false;\r\n    if (width * newRatio <= mWidth && height * newRatio <= mHeight) {\r\n      // 若缩放后的尺寸不足填充屏幕，则 origin 为图像中心，缩放从中部开始\r\n      newOrigin = {\r\n        x: width / 2,\r\n        y: height / 2\r\n      };\r\n      isCenter = true;\r\n    }\r\n    let transX, transY;\r\n    if (!isCenter) {\r\n      transX = rect.left + this.rectLeft2TransXFix - (newRatio - this.state.scaleRatio) * newOrigin.x;\r\n      transY = rect.top + this.rectTop2TransYFix - (newRatio - this.state.scaleRatio) * newOrigin.y;\r\n    } else {\r\n      transX = -(newRatio - 1) * newOrigin.x;\r\n      transY = -(newRatio - 1) * newOrigin.y;\r\n    }\r\n    this.setState({\r\n      translateX: transX,\r\n      translateY: transY,\r\n      scaleRatio: newRatio,\r\n      transition: '',\r\n      enableTransformAnimation: true,\r\n      lastAction: Actions.doubleClickScale\r\n    });\r\n  }\r\n\r\n  transitionEnd = (e) => {\r\n    if (e.propertyName === 'transform') {\r\n      if (e.target.tagName === 'IMG' && this.state.lastAction === Actions.doubleClickScale) {\r\n        this.inertiaDamp.scaleDamp();\r\n      }\r\n    }\r\n  }\r\n\r\n  transStyle = (idx) => {\r\n    let state = this.state;\r\n    let mWidth = this.state.maskWidth;\r\n    let style = Object.assign({},\r\n      state.currentIndex === idx ?\r\n        {\r\n          transform: `matrix(${state.scaleRatio}, 0, 0, ${state.scaleRatio}, ` +\r\n            `${state.translateX - mWidth * idx}, ${state.translateY}) translateZ(0)`,\r\n          transition: state.transition,\r\n          willChange: `transform`\r\n        } :\r\n        {\r\n          transform: `matrix(1, 0, 0, 1, ${-mWidth * (state.currentIndex)}, 0)`,\r\n        },\r\n      state.enableTransformAnimation ? { transition: 'transform 200ms' } : null\r\n    );\r\n    return style;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"mask\" ref={this.maskRef} onTransitionEnd={this.maskTransitionEnd}>\r\n        <Topbar close={this.closeWrap} download={this.download} isShow={this.state.showTopBar} enableDownload={this.props.enableDownload}\r\n          indexInfo={`${this.state.currentIndex + 1} / ${this.props.images.length}`}></Topbar>\r\n        <div className=\"images\"\r\n          onTouchEnd={this.stopTouch} onTouchMove={this.touchMove} onTouchStart={this.startTouch} onTouchCancel={this.cancelTouch}>\r\n          {this.props.images.map((src, idx) =>\r\n            <div key={idx}><img draggable src={src} key={idx} alt={`${idx + 1}`} onTransitionEnd={this.transitionEnd}\r\n              style={this.transStyle(idx)} onLoad={(e) => this.onImagesLoad(e, idx)} onContextMenu={(e) => { e.preventDefault() }} /></div>)}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  closeWrap = () => {\r\n    this.maskRef.current.style.transform = 'translateX(100%)';\r\n    this.allClosed = true;\r\n  }\r\n\r\n  allClosed = false\r\n\r\n  maskTransitionEnd = () => {\r\n    if (this.allClosed) {\r\n      this.props.close();\r\n    }\r\n  }\r\n\r\n  toggleTopBar = () => {\r\n    if (this.touching) {\r\n      return;\r\n    }\r\n    this.setState({\r\n      showTopBar: !this.state.showTopBar\r\n    });\r\n  }\r\n\r\n  clearTimeout = (timerKey) => {\r\n    if (!this.timers[timerKey]) {\r\n      return;\r\n    }\r\n    clearTimeout(this.timers[timerKey]);\r\n    this.timers[timerKey] = null;\r\n  }\r\n\r\n  recordTimer = (timerKey, timeout, callback) => {\r\n    this.clearTimeout(timerKey);\r\n    this.timers[timerKey] = setTimeout(() => {\r\n      callback ? callback.apply() : void (0);\r\n      this.clearTimeout(timerKey);\r\n    }, timeout);\r\n  }\r\n\r\n  recordPreTouchPosition = (x, y) => {\r\n    this.preTouchPosition = { x: x, y: y };\r\n  }\r\n\r\n  // 计算图片实时高度转 translateY 所需补充值; translateX 同理\r\n  // 受到缓动动画影响，translateY 不等于图片实时值（translateY = 0 位于中部）\r\n  //   |------------------------|\r\n  //   |                        | \\__This is -rectTop2TransYFix （notice the MINUS）\r\n  //   |                        |/\r\n  //   |   ``````````````````   |<--This is where translateY == 0\r\n  //   |   ` image top half `   | \\\r\n  //   |---`-middle-line----`---|  > Whole Image\r\n  //   |   `                `   |/\r\n  //   |   ``````````````````   |\r\n  //   |   |                    |      The whole rectangle is Your Screen, also as the modal Mask\r\n  //   |   |                    |\r\n  //   |------------------------|\r\n  //   |   |\r\n  //   >===< This is -rectLeft2TransXFix\r\n  //\r\n  // 由 rect.top + this.rectTop2TransYFix 获取实时 translateY\r\n  rectTop2TransYFix = 0;\r\n  rectLeft2TransXFix = 0;\r\n  getRect2TranslateFix = () => {\r\n    let dimen = this.imagesSizes[this.state.currentIndex];\r\n    this.rectTop2TransYFix = - (this.state.maskHeight - dimen.height) / 2;\r\n    this.rectLeft2TransXFix = - (this.state.maskWidth - dimen.width) / 2;\r\n  }\r\n\r\n  // 由于某个事件取消了触摸\r\n  // 1. 例如触摸过程被一个模态的弹出框打断\r\n  // 2. 触点离开了文档窗口，而进入了浏览器的界面元素、插件或者其他外部内容区域\r\n  // 3. 当用户产生的触点个数超过了设备支持的个数，从而导致 TouchList 中最早的 Touch 对象被取消\r\n  cancelTouch = (e) => {\r\n    // 可以使用微信长按触发\r\n    if (e.touches.length === 0) {\r\n      Object.keys(this.timers).map(key => this.clearTimeout(key));\r\n      this.touching = false;\r\n    }\r\n  }\r\n\r\n  timers = {\r\n    firstClickTimer: null,\r\n    doubleClickTimer: null,\r\n    // 补充：防止 free scale 后短时间内触发瞬移 move（未及时更新 lastTwo）\r\n    justFreeScaled: null\r\n  };\r\n\r\n  touching = false;\r\n  // 记录图片的初始显示大小、图片原始大小\r\n  imagesSizes = [];\r\n  // 双指 / 多指，记录前一次的两触摸点\r\n  preTouchesClientx1y1x2y2 = [];\r\n  // 接触点 - 图片左上角的值\r\n  preTouchPosition = null;\r\n\r\n  getMaskSize = () => {\r\n    // 从 mask 换为直接获取 body 尺寸，从而可以在 will mount 阶段就可以获取\r\n    let width = document.body.clientWidth;\r\n    let height = document.body.clientHeight;\r\n    return { width: width, height: height };\r\n  };\r\n\r\n  // 获取当前图片的位置\r\n  imgBounding = {\r\n    img: null,\r\n    get rect() {\r\n      // 有时 img 还没有被赋值，不应该啊？？\r\n      if (this.img) {\r\n        return this.img.getBoundingClientRect();\r\n      }\r\n      return { top: 0, right: 0, bottom: 0, left: 0, height: 0, width: 0 };\r\n    },\r\n    loadImageBound(index) {\r\n      this.img = document.querySelectorAll('.images img')[index];\r\n    }\r\n  }\r\n\r\n  doubleScaleRatios = {\r\n    ratioLists: [],\r\n    computeScale: (a, b) => {\r\n      return a > b ? a / b : b / a;\r\n    },\r\n    that: this,\r\n    get nextRatio() {\r\n      let currentRatio = this.that.state.scaleRatio;\r\n      let index = this.ratioLists.indexOf(currentRatio);\r\n      if (index >= 0) {\r\n        return this.ratioLists[(index + 1) % this.ratioLists.length];\r\n      }\r\n      return (this.ratioLists.map((r, i) =>\r\n        ({ ratio: r, scale: currentRatio / r, idx: i })).sort((a, b) => b.scale - a.scale))[0].ratio;\r\n    },\r\n    updateScaleRatioList: () => {\r\n      // console.log('update scale ratios');\r\n      let ratios = [];\r\n      let mWidth = this.state.maskWidth, mHeight = this.state.maskHeight;\r\n      let { width, height, originHeight: oHeight } = this.imagesSizes[this.state.currentIndex];\r\n      // 长宽适配，去除重复比例\r\n      let heightScale = mHeight / height, widthScale = mWidth / width;\r\n      ratios.push(heightScale);\r\n      if (heightScale !== widthScale) {\r\n        ratios.push(widthScale);\r\n      }\r\n      // 原始尺寸\r\n      let originRatio = oHeight / height;\r\n      if (!ratios.includes(originRatio)) {\r\n        ratios.push(originRatio);\r\n      }\r\n      this.doubleScaleRatios.ratioLists = ratios;\r\n    },\r\n    get minRatio() {\r\n      return this.ratioLists.sort()[0];\r\n    }\r\n  }\r\n\r\n  // 绝对坐标转相对坐标，因为 transform-origin 只接受原始坐标值\r\n  relativeCoordinate = (x, y, left, top) => {\r\n    let ratio = this.state.scaleRatio;\r\n    let cx = (x - left) / ratio;\r\n    let cy = (y - top) / ratio;\r\n    return { x: cx, y: cy };\r\n  }\r\n\r\n  updateOnResize = (() => {\r\n    let tick = null;\r\n    const update = () => {\r\n      let maskSize = this.getMaskSize();\r\n      this.setState({\r\n        translateX: 0,\r\n        translateY: 0,\r\n        scaleRatio: 1,\r\n        enableTransformAnimation: false,\r\n        maskHeight: maskSize.height,\r\n        maskWidth: maskSize.width\r\n      }, callback.bind(this));\r\n      // I use the function keyword declaration to display the executing order better \r\n      // because jslint will warn the arrow function being used before defined.\r\n      function callback() {\r\n        let imgs = document.querySelectorAll('.images img');\r\n        imgs.forEach((img, idx) => {\r\n          let size = this.imagesSizes[idx];\r\n          size.width = img.width;\r\n          size.height = img.height;\r\n        });\r\n        this.getRect2TranslateFix();\r\n        this.doubleScaleRatios.updateScaleRatioList();\r\n      };\r\n    };\r\n    return () => {\r\n      // debounce\r\n      clearTimeout(tick);\r\n      tick = setTimeout(update, 100);\r\n    };\r\n  })();\r\n\r\n  onImagesLoad = ({ target: img }, idx) => {\r\n    this.imagesSizes[idx] = {\r\n      width: img.width,\r\n      height: img.height,\r\n      originWidth: img.naturalWidth,\r\n      originHeight: img.naturalHeight\r\n    };\r\n    if (idx === this.state.currentIndex) {\r\n      this.getRect2TranslateFix();\r\n    }\r\n    let noEmpty = !this.imagesSizes.includes(undefined);\r\n    if (noEmpty && this.imagesSizes.length === this.props.images.length) {\r\n      this.imgBounding.loadImageBound(this.state.currentIndex);\r\n      this.doubleScaleRatios.updateScaleRatioList();\r\n    }\r\n  }\r\n\r\n  disableBodyMove = (e) => {\r\n    e.preventDefault();\r\n  }\r\n\r\n  componentWillMount = () => {\r\n    // DO NOT use, this is a deprecated lifecycle api!\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    // show image viewer\r\n    setTimeout(() => {\r\n      this.maskRef.current.style.transform = 'translate(0,0)';\r\n    });\r\n\r\n    window.addEventListener('resize', this.updateOnResize);\r\n    document.body.addEventListener('touchmove', this.disableBodyMove, passiveSupport ? { passive: false } : false);\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    window.removeEventListener('resize', this.updateOnResize);\r\n    this.props.onUnmount();\r\n    document.body.removeEventListener('touchmove', this.disableBodyMove);\r\n  }\r\n\r\n  download = async (e) => {\r\n    // 手机上无法通用地实现，目前仅发现 chrome 支持通过 blob 保存\r\n    alert('call native method!')\r\n  }\r\n}\r\n\r\nfunction Topbar(props) {\r\n  return (\r\n    <div className=\"top\" style={{ transform: props.isShow ? null : `translateY(-120%)` }}>\r\n      <div className=\"back\" onClick={props.close}></div>\r\n      <div className=\"index\">{props.indexInfo}</div>\r\n      {props.enableDownload ?\r\n        <div className=\"download\" onClick={props.download}></div> : <div className=\"download noBackground\"></div>}\r\n      <div className=\"shadow\"></div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* future job\r\nfunction DescriptionPanel(props) {\r\n  return (\r\n    <div className=\"bottom\">\r\n      <div className=\"title\">{props.description.title}</div>\r\n      <div className=\"content\">{props.description.content}</div>\r\n    </div>\r\n  );\r\n}*/\r\n\r\n/*\r\n * props: 传入图片的字符串（单张）或数组（多张）\r\n * props: 传入对象   { images: 数组, onClose: 关闭时的回调函数 }\r\n */\r\n// todo 传入：是否允许下载、current index、是否循环展示\r\nfunction ShowImageView(props = {}) {\r\n  let viewerContainer = document.querySelector('.__image_view__');\r\n  let bodyOverflow = document.body.style.overflow;\r\n  if (viewerContainer) {\r\n    document.body.appendChild(viewerContainer);\r\n  } else {\r\n    viewerContainer = document.createElement('div');\r\n    viewerContainer.className = \"__image_view__\";\r\n    document.body.appendChild(viewerContainer);\r\n  }\r\n\r\n  if (typeof props === 'string') {\r\n    props = {\r\n      images: [props]\r\n    };\r\n  } else if (Array.isArray(props)) {\r\n    props = {\r\n      images: props\r\n    };\r\n  }\r\n  // { images: Array(string), currentIndex: number }\r\n  props = Object.assign({ currentIndex: 0, enableDownload: false }, props);\r\n\r\n  if (typeof props.images === 'undefined') {\r\n    throw new Error('Didn\\'t pass the necessary parameters!');\r\n  }\r\n\r\n  const component = React.createElement(ImageView, Object.assign(props, {\r\n    close: () => {\r\n      ReactDOM.render(null, viewerContainer);\r\n    },\r\n    onUnmount: () => {\r\n      const container = document.querySelector('.__image_view__');\r\n      ReactDOM.unmountComponentAtNode(container);\r\n      document.body.style.overflow = bodyOverflow;\r\n      if (props.onClose instanceof Function) {\r\n        props.onClose.apply(null);\r\n      }\r\n    }\r\n  }));\r\n  ReactDOM.render(component, viewerContainer);\r\n  document.body.style.overflow = 'hidden';\r\n}\r\n\r\nexport default ShowImageView;","import React, { Component } from 'react';\r\nimport ShowImageView from './ImageView';\r\nimport logo from './logo.svg';\r\nimport './App.scss';\r\n\r\nclass App extends Component {\r\n  componentDidMount() {\r\n    setTimeout(() => {\r\n      this.showImageView();\r\n      if (!('ontouchstart' in window)) {\r\n        alert('Please visit on your phone, or enable devtools\\' mobile mode\\r\\n请使用手机访问，或启用开发工具的手机模拟选项');\r\n      }\r\n    }, 300);\r\n  }\r\n  showImageView = () => {\r\n    ShowImageView({ images: ['https://is1-ssl.mzstatic.com/image/thumb/Purple118/v4/bc/ba/16/bcba16f8-49ce-c6b9-6226-d7d85a8556ea/source/256x256bb.jpg', 'https://camo.githubusercontent.com/ba1b52bab595d4c1557f03bb4abf47acdf67f035/687474703a2f2f73722e6b737269612e636e2f6c6f676f2532306269676765722e706e67', 'https://cdn.sspai.com/article/86c69914-4545-bc1c-1310-2975d4fe8d6b.jpg?imageMogr2/quality/95/thumbnail/!700x233r/gravity/Center/crop/700x233', 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3591249579,147186327&fm=26&gp=0.jpg'].reverse(), currentIndex: 1, onClose: () => console.log('viewer onclose callback') });\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <header className=\"App-header\">\r\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\r\n          <p>\r\n            可爱熊图片查看器\r\n          </p>\r\n          <button onClick={this.showImageView}>show me</button>\r\n        </header>\r\n        <div className=\"svg\"></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}